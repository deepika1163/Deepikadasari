# ATM Machine Simulation in Python

class ATM:
    def __init__(self, pin, balance=0):
        """Initialize the ATM with a user's PIN and an optional starting balance."""
        self.pin = pin
        self.balance = balance
        self.transaction_history = []
   
    def check_pin(self, input_pin):
        """Verify the entered PIN."""
        return self.pin == input_pin
   
    def check_balance(self):
        """Return the current account balance."""
        return f"Your current balance is: ${self.balance:.2f}"
   
    def deposit(self, amount):
        """Deposit an amount to the account and log the transaction."""
        if amount > 0:
            self.balance += amount
            self.transaction_history.append(f"Deposited: ${amount:.2f}")
            return f"${amount:.2f} deposited successfully."
        else:
            return "Invalid amount. Please enter a positive value."
   
    def withdraw(self, amount):
        """Withdraw an amount from the account and log the transaction."""
        if amount > 0:
            if amount <= self.balance:
                self.balance -= amount
                self.transaction_history.append(f"Withdrew: ${amount:.2f}")
                return f"${amount:.2f} withdrawn successfully."
            else:
                return "Insufficient funds."
        else:
            return "Invalid amount. Please enter a positive value."
   
    def change_pin(self, old_pin, new_pin):
        """Change the account PIN after verifying the old PIN."""
        if self.check_pin(old_pin):
            self.pin = new_pin
            self.transaction_history.append("PIN changed successfully.")
            return "PIN changed successfully."
        else:
            return "Incorrect old PIN."
   
    def show_transaction_history(self):
        """Display the transaction history."""
        if self.transaction_history:
            return "\n".join(self.transaction_history)
        else:
            return "No transactions have been made."

def atm_menu():
    """Display the ATM menu and process user choices."""
    atm = ATM(pin="1234", balance=500.0)  # Initializing with default PIN and balance
    print("Welcome to the ATM!")
   
    # PIN validation
    attempts = 3
    while attempts > 0:
        input_pin = input("Please enter your PIN: ")
        if atm.check_pin(input_pin):
            break
        else:
            attempts -= 1
            print(f"Incorrect PIN. You have {attempts} attempt(s) left.")
   
    if attempts == 0:
        print("Too many incorrect attempts. Exiting.")
        return
   
    # Main menu loop
    while True:
        print("\nATM Menu:")
        print("1. Check Balance")
        print("2. Deposit Cash")
        print("3. Withdraw Cash")
        print("4. Change PIN")
        print("5. View Transaction History")
        print("6. Exit")
       
        choice = input("Please choose an option (1-6): ")
       
        if choice == '1':
            print(atm.check_balance())
        elif choice == '2':
            amount = float(input("Enter amount to deposit: "))
            print(atm.deposit(amount))
        elif choice == '3':
            amount = float(input("Enter amount to withdraw: "))
            print(atm.withdraw(amount))
        elif choice == '4':
            old_pin = input("Enter your old PIN: ")
            new_pin = input("Enter your new PIN: ")
            print(atm.change_pin(old_pin, new_pin))
        elif choice == '5':
            print("Transaction History:")
            print(atm.show_transaction_history())
        elif choice == '6':
            print("Thank you for using the ATM. Goodbye!")
            break
        else:
            print("Invalid choice. Please select a valid option.")

if __name__ == "__main__":
    atm_menu()

